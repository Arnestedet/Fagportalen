<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
  const supabase = supabase.createClient('https://wykturbnheskysgjiihj.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5a3hrd3l3cmp4Z2Vldnl2bXJjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyNDkwNjQsImV4cCI6MjA2NTgyNTA2NH0.7BsbatTmKgK3Blf4LgHyhMj1vlF_EIIpoZCPT7fi7tk');

  async function hentPersoner() {
    const container = document.getElementById('personliste');
    container.innerText = "Laster personer...";

    const { data, error } = await supabase.from('personer').select('*');

    if (error) {
      container.innerText = "Feil ved lasting av data";
      console.error(error);
      return;
    }

    if (data.length === 0) {
      container.innerText = "Ingen personer funnet.";
      return;
    }

    container.innerHTML = ""; // Tømmer "Laster..." teksten

    data.forEach(person => {
      container.innerHTML += `
        <div style="margin-bottom:20px; border:1px solid #ccc; padding:10px;">
          <h2>${person.navn} (${person.fodselsar ?? 'ukjent'}–${person.dodsar ?? 'ukjent'})</h2>
          ${person.bilde_url ? `<img src="${person.bilde_url}" width="150" style="max-width:100%;" />` : ''}
          <p>${person.biografi ?? ''}</p>
        </div>
      `;
    });
  }

  hentPersoner();
</script>
